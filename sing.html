<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script
      src="https://kit.fontawesome.com/64d58efce2.js"
      crossorigin="anonymous"
    ></script>
    <link rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css">
  <link rel="stylesheet" href="CSS/st.css">  
  <link rel="stylesheet" href="CSS/style.css" />
    <title>Sign in & Sign up Form</title>
  </head>
  <body>
    
    <div class="container">
      <div class="forms-container">
        <div class="signin-signup">
          <form action="#" class="sign-in-form">
            <h2 class="title">Sign in</h2>
            <div class="input-field">
                <i class="fas fa-envelope"></i>
                <input type="email" placeholder="Email" id="inemail" required/>
              </div>
            <div class="input-field">
              <i class="fas fa-lock"></i>
              <input type="password" placeholder="Password" id="inpass" minlength="6" required/>
            </div>
            <input type="submit" value="Login" id="lOgin" class="btn solid" />
            <div id="sEa"></div>
            <p class="social-text"></p>
            <div class="social-media">
              <a href="#" class="">
                <i class=""></i>
              </a>
              <a href="#" class="">
                <i class=""></i>
              </a>
              <a href="#" class="">
                <i class=""></i>
              </a>
              <a href="#" class="">
                <i class=""></i>
              </a>
            </div>
          </form>
          <form action="#" class="sign-up-form">
            <div id="errormsg"></div>
            <h2 class="title">Sign up</h2>
            <div class="input-field">
              <i class="fas fa-user"></i>
              <input type="text" placeholder="Username" id="userup" required/>
            </div>
            <div class="input-field">
              <i class="fas fa-user"></i>
              <input type="text" style="text-transform:uppercase" placeholder="Section-In class 10" id="sec52" pattern="[A-Da-d]{1}" required/>
            </div>
            <div class="input-field">
                <i class="fas fa-user"></i>
                <input type="number" id="roll52" placeholder="Roll-In class 10" min="1" max="60" required/>
            </div>
            <div class="input-field">
                <i class='bx bxs-phone' ></i>
                <input type="tel" id="numip" placeholder="Phone-Number" pattern="[0]{1}[1]{1}[0-9]{9}" required/>
            </div>
            <div class="input-field">
              <i class="fas fa-envelope"></i>
              <input type="email" placeholder="Email" id="emailup" required/>
            </div>
            <div class="input-field">
              <i class="fas fa-lock"></i>
              <input type="password" id="passup" placeholder="Password" minlength="6" required/>
            </div>
            <input type="submit" class="btn" id="subup5" value="Sign up" />
            <p class="social-text"></p>
            <div class="social-media">
              <a href="#" class="">
                <i class=""></i>
              </a>
              <a href="#" class="">
                <i class=""></i>
              </a>
              <a href="#" class="">
                <i class=""></i>
              </a>
              <a href="#" class="">
                <i class=""></i>
              </a>
              </a>
            </div>
          </form>
        </div>
      </div>

      <div class="panels-container">
        <div class="panel left-panel">
          <div>
            <div class="popup" id="popup">
                <img src="img/done.png" class="popup-img1" id="popup-img1" alt="" srcset="">
                <img src="img/cancel.png" class="popup-img2" id="popup-img2" alt="" srcset="">
                <h2 id="h1">Thank you </h2>
                <p><br><div id="sEE1"></div><br><div id="sEE2"></div></p>
                <button type="button" onclick="closeP()"><p style="color: black; font-size: 15px;"><b>OK</b></p></button>
            </div>
          </div>
          <div class="content">
            <h3>Welcome !</h3>
            <p>
              <b>Bl is not a just name.<br>it is a brand</b>
            </p>
            <button class="btn transparent" id="sign-up-btn">
              Sign up
            </button>
          </div>
          <img src="img/log.svg" class="image" alt="" />
        </div>
        <div class="panel right-panel">
          <div class="content">
            <h3>Welcome </h3>
            <p>
             <b>Bl is not a just name.<br>it is a brand</b> 
            </p>
            <button class="btn transparent" id="sign-in-btn">
              Sign in
            </button>
          </div>
          <img src="img/register.svg" class="image" alt="" />
        </div>
      </div>
    </div>
    

    <script src="JS/app.js"></script>
    <script src="JS/seam.js" type="module"></script>
    <script type="module">
      import { getAuth, updateProfile, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-auth.js";
      import {firebaseConfig} from "./JS/api.js";
      var email = document.getElementById('inemail');
      var password = document.getElementById('inpass');
      const auth = getAuth();
      function lOgin4(){
        signInWithEmailAndPassword(auth, email.value, password.value)
          .then(() => {
            // Signed in 
            
            // ...
            const user = auth.currentUser;
            const emailVerified = user.emailVerified;
            if (user !== null && emailVerified == true) {
              const user = auth.currentUser;
              const displayName = user.displayName;
              var length = displayName.length;
              var name1 = displayName.substr(-length,(length-4));


              localStorage.setItem("User_Name", name1);
              localStorage.setItem("User_Full_Name", displayName);
              localStorage.setItem("User_Photo", user.photoURL);
              localStorage.setItem("User_Email", user.email);
              localStorage.setItem("User_Email_Verify", user.emailVerified);
              // localStorage.setItem("User_Create_Time", user.createdAt);
              // localStorage.setItem("User_Last_Login_Time", user.lastLoginAt);
              
              var dIv1 = document.getElementById('sEE1');
              var dIv2 = document.getElementById('sEE2');
              dIv2.classList.remove("popup-div2")
              dIv2.classList.add("popup-div1")
              dIv1.innerText = name1;
              dIv2.innerText = "Login Successfully"
              var popup1 = document.getElementById('popup');
              var popupimg = document.getElementById('popup-img2');
              popup1.classList.add("open-popup");
              popupimg.classList.add("open-img");
              // The user's ID, unique to the Firebase project. Do NOT use
              // this value to authenticate with your backend server, if
              // you have one. Use User.getToken() instead.
              const uid = user.uid;
              dIv2.classList.add("popup-div2");
              setTimeout(myGood, 1500);
              function myGood(){
              window.open("Home.html","_parent");
              }
            
            }
            else{
              var dIv1 = document.getElementById('sEE1');
              var dIv2 = document.getElementById('sEE2');
              var h1 = document.getElementById('h1');
              dIv1.innerText = ""
              h1.innerText = ""
              dIv2.innerText = "Please Verify Email Frist !!"
              var popup1 = document.getElementById('popup');
              var popupimg = document.getElementById('popup-img1');
              popup1.classList.add("open-popup");
              popupimg.classList.add("open-img");

            };
          })
          .catch((error) => {
            const errorCode = error.code;
            const errorMessage = error.message;
            var dIv1 = document.getElementById('sEE1');
            var dIv2 = document.getElementById('sEE2');
            var h1 = document.getElementById('h1');
            dIv1.innerText = ""
            h1.innerText = ""
            dIv2.innerText = "Invaild Email or Wrong Passwoed"
            var popup1 = document.getElementById('popup');
            var popupimg = document.getElementById('popup-img1');
            popup1.classList.add("open-popup");
            popupimg.classList.add("open-img");
            dIv2.classList.add("popup-div2")
            
          });
          
      };
      var lOg22 = document.getElementById('lOgin');
      lOg22.addEventListener('click', lOgin4);
    </script>
    <script>
      var popup = document.getElementById('popup');
      function closeP(){
        popup.classList.remove("open-popup");
      }
     </script>
  </body>
</html>
